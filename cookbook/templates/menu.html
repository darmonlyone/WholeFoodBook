{% extends 'base_template.html' %}
{% block content %}
    {% load static %}
    {% if recipe_enable %}
    {% for recipe in recipe_enable %}
    <div class="container-fluid" style="margin-bottom : 80px;">
        <div class="row" id="menu-info">
            <div class="col-md-7 pr-md-1" id="menu-image">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="8000">
                    <div class="carousel-inner show-img">
                        <div class="carousel-item active">
                            <img class="d-block w-100" src="{{ recipe.recipe_image_1.url }}" alt="First slide">
                        </div>
                        {% if recipe.get_all_recipe_image %}
                            {% for recipe_image in recipe.get_all_recipe_image %}
                            <div class="carousel-item">
                                <img class="d-block w-100" src="{{ recipe_image.url }}" alt="Second slide">
                            </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
            </div>

            <div class="text-center col-md-5 pl-md-1" style="align-self:center; height: auto;">
                <div id="menu-descrip">
                    <div id="menu-descrip-header"><b>{{ recipe.get_recipe_name }}</b></div>
                    <p id="menu-descrip-detail">
                     {{ recipe.get_recipe_info }}
                    </p>
                    <div class="container" style="margin-bottom:20px;">
                        <div class="row menu-descrip-info">
                            <div class="col-md-6">
                                <img src="{% static 'image/icons8_Chef_Hat_50px_1.png' %}" style="margin-right:20px;" /><b> TOTAL
                                TIME: </b>
                            </div>
                            <div class="col-md-6 descrip" id="descrip-time">
                                <!-- show cooking time in terms of hour(s) and minute(s) -->
                                <script type="text/javascript">
                                    function timeConvert(time) {
                                        let recipe_time = parseInt(time);
                                        let minutes = recipe_time % 60;
                                        let hours = (recipe_time - minutes) / 60;
                                        let result =""
                                        if (hours > 0){
                                            result = result.concat(hours);
                                            if (hours === 1){
                                                result = result.concat(" HOUR");
                                            } else {
                                                result = result.concat(" HOURS");
                                            }
                                        }
                                        if(hours > 0 && minutes > 0){
                                            result = result.concat(" ")
                                        }
                                        if (minutes > 0){
                                            result = result.concat(minutes);
                                            if (minutes === 1){
                                                result = result.concat(" MINUTE");
                                            } else {
                                                result = result.concat(" MINUTES");
                                            }
                                        }
                                        return result;
                                    }
                                    document.write(timeConvert("{{ recipe.get_recipe_time }}")); // ex. 2 hours 30 minutes.
                                </script>
                            </div>
                        </div>
                        <div class="row menu-descrip-info">
                            <div class="col-md-6">
                                <img src="{% static 'image/icons8_Cooking_Pot_50px_2.png' %}" style="margin-right:20px;"> <b> EQUIPMENT: </b>
                            </div>
                            <div class="col-md-6 descrip" id="descrip-equipment">{{ recipe.get_recipe_equipment }}</div>
                        </div>
                        <div class="row menu-descrip-info">
                            <div class="col-md-6">
                                <img src="{% static 'image/icons8_Fat_Man_50px_1.png' %}" style="margin-right:20px;"><b> CALORIES / SERVING: </b>
                            </div>
                            <div class="col-md-6 descrip" id="descrip-fat">{{ recipe.get_recipe_fat }} KCAL</div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" id="menu-chef"><b>By: {{ recipe.get_recipe_chef }}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="menu-button">
            <div class="btn-group">
                <button class="menu-but clicked" id="menu-but-recipe">Recipe</button>
                <button class="menu-but" id="menu-but-review">Review</button>
            </div>
        </div>

        <div class="row" id="menu-content">
            <div class="col-md-5 pr-md-1">
                <div id="menu-ingredient">
                    <div class="menu-header">Ingredients:</div>
                    <div class="container">
                        {% for ingredient in recipe.get_recipe_ingredient %}
                        <div class="row">
                            <div class="col-md-3 pb-md-2 ingre-quantity" id="">
                                <p>{{ ingredient.get_amount }}</p>
                            </div>
                            <div class="col-md-8 pb-md-2 ingre-detail" id="">
                                <p>{{ ingredient.get_detail }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-md-7 pl-md-1">
                <div id="menu-direction">
                    <div class="menu-header">Directions:</div>
                    <ol type="1" id="med-li">
                        {% for method in recipe.get_recipe_method_list %}
                        <li class="li">{{ method }}</li>
                        {% endfor %}
                    </ol>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
        {% else %}
        <h1>This Recipe are not available.</h1>
    {% endif %}
{% endblock %}